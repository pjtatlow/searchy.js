!function(e){e.fn.searchyBox=function(s){var t=e.extend({appendTo:"body",dates:!1,draggable:!1,posts:[],index:{},floatingBtn:!1,placeHolder:"Search Blog",style:{background:"#579A00",text:"#eee"},shortcut:{key:32,modifier:"shiftKey"}},s);if(!(t.posts.length>0||t.index!=={}))throw"Missing required input!";var a=["shiftKey","ctrlKey","altKey"];if(a.indexOf(t.shortcut.modifier)===-1)throw"Illegal modifier: "+t.shortcut.modifier;if(void 0===t.shortcut.key||null===t.shortcut.key)throw"Illegal shortcut key:"+t.shortcut.key;e(t.appendTo).append('<div class="searchy-background"><div class="searchy-cover"><div class="searchy-box"><div class="col-md-12 col-lg 12 col-sm-12 col-xs-12 input-group"><input type="text" class="form-control searchy-input" placeholder="'+t.placeHolder+'" autocomplete="off"><span class="searchy-addon input-group-addon"><i class="glyphicon glyphicon-search"></i></span></div><span class="searchy-input-cover"></span><div class="searchy-bottom" class="col-md-12 col-lg 12 col-sm-12 col-xs-12"></div></div></div></div>'),t.floatingBtn&&(e(t.appendTo).append('<button class="searchy-button" style=" background-color: '+t.style.background+"; color: "+t.style.text+'"><i class="glyphicon glyphicon-search"></i></button>'),e(".searchy-button").click(function(){e(".searchy-background").fadeToggle(100,function(){"none"!==e(".searchy-background").css("display")?e(".searchy-input").focus():e(".searchy-input").blur()})})),e(t.appendTo).append("<style>         .searchy-background .searchy-cover .searchy-box .searchy-bottom .searchy-results .searchy-result.selected { background-color: "+t.style.background+"; color: "+t.style.text+" }         </style>");var r=function(s){e(".searchy-result").each(function(){e(this).removeClass("selected"),e(this).attr("data-searchy-id")==s&&e(this).addClass("selected")});var a=t.posts[s];e(".searchy-results-preview").empty(),e(".searchy-results-preview").append('<h5 class="text-center"><strong>Preview</strong></h5><div class="searchy-preview-container"></div>'),e(".searchy-preview-container").append(a.html),t.dates&&e(".searchy-results-preview").append('<h5 class="searchy-results-preview-meta">'+a.date.toLocaleDateString()+"</h5>"),e(".searchy-input").focus()};return t.draggable&&e(".searchy-box").draggable({containment:".searchy-background",handle:".searchy-input-cover"}),e(document).keydown(function(s){if(s.which==t.shortcut.key)s[t.shortcut.modifier]&&(s.preventDefault(),e(".searchy-background").fadeToggle(100,function(){"none"!==e(".searchy-background").css("display")?e(".searchy-input").focus():e(".searchy-input").blur()}));else if("none"!==e(".searchy-background").css("display"))if(40==s.which||9==s.which&&s.shiftKey===!1){s.preventDefault();var a=-1,c=-1;e(".searchy-result").each(function(){e(this).attr("data-searchy-index")>c&&(c=e(this).attr("data-searchy-index")),e(this).hasClass("selected")&&(e(this).removeClass("selected"),a=e(this).attr("data-searchy-index"))}),a++,a>c&&(a=0),r(e("[data-searchy-index="+a+"]").attr("data-searchy-id"))}else if(38==s.which||9==s.which&&s.shiftKey===!0){s.preventDefault();var a=-1,c=-1;e(".searchy-result").each(function(){e(this).attr("data-searchy-index")>c&&(c=e(this).attr("data-searchy-index")),e(this).hasClass("selected")&&(e(this).removeClass("selected"),a=e(this).attr("data-searchy-index"))}),a--,a<0&&(a=c),r(e("[data-searchy-index="+a+"]").attr("data-searchy-id"))}else if(13==s.which){var i=e(".searchy-result.selected").children("a").attr("href");void 0!==i&&(e(".searchy-bottom").empty(),e(".searchy-background").hide(),window.location=i)}}),e(".searchy-background").on("click",function(s){s.target==e(this)[0]&&e(this).fadeToggle(100,function(){e("#searchy-input").blur()})}),e(".searchy-input-cover").on("click",function(s){e(".searchy-input").focus()}),e(".searchy-input").on("input",function(s){e(".searchy-bottom").empty();var a=t.index.search(e(this).val());if(a.length>0){e(".searchy-bottom").empty(),e(".searchy-bottom").append('<div class="searchy-results"><div><h5 class="searchy-results-title"><strong>Results:</strong><span class="pull-right>"'+a.length+'</span></h5></div></div><div class="searchy-results-preview"></div>');for(var c=0,c=0;c<a.length;c++){var i=a[c],n=t.posts[i.ref],o="";c%2==1&&(o="striped"),e(".searchy-results").append('<div class="searchy-result '+o+'" data-searchy-index="'+c+'" data-searchy-id="'+i.ref+'"><h5>'+n.title+"</h5><a href='"+n.url+"'><i class='glyphicon glyphicon-circle-arrow-right'></i></a></div>"),0==c&&r(i.ref)}}}),e(".searchy-input").keydown(function(e){40!=e.which&&38!=e.which||e.preventDefault()}),e(document).on("click",".searchy-result",function(s){var t=e(s.target).attr("data-searchy-id");void 0===t&&(t=e(s.target).parent().attr("data-searchy-id")),r(t)}),this}}(jQuery);